@model CMCS.Models.Claim
@using System.Globalization
@{
    ViewData["Title"] = "Submit Claim";
}

<div class="container mt-4">
    <h2>Submit New Claim</h2>
    <form asp-action="SubmitClaim" asp-controller="Lecturer" method="post" enctype="multipart/form-data">
        @Html.AntiForgeryToken()
        <div class="mb-3">
            <label for="claimName" asp-for="ClaimName" class="form-label">Claim Name</label>
            <input id="claimName" asp-for="ClaimName" class="form-control" required />
            <span asp-validation-for="ClaimName" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label for="submissionDate" asp-for="SubmissionDate" class="form-label">Submission Date</label>
            <input id="submissionDate" asp-for="SubmissionDate" class="form-control" type="date" value="@Model.SubmissionDate.ToString("yyyy-MM-dd", CultureInfo.InvariantCulture)" required />
            <span asp-validation-for="SubmissionDate" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label for="hoursWorked" asp-for="HoursWorked" class="form-label">Hours Worked</label>
            <input id="hoursWorked" asp-for="HoursWorked" class="form-control" type="number" min="1" required />
            <span asp-validation-for="HoursWorked" class="text-danger"></span>
        </div>
        <div class="mb-3">
            <label for="totalAmount" asp-for="TotalAmount" class="form-label">Total Amount (R)</label>
            <input id="totalAmount" asp-for="TotalAmount" class="form-control" type="number" step="0.01" min="0" required />
            <span asp-validation-for="TotalAmount" class="text-danger"></span>
        </div>
        <h3>Upload Supporting Documents</h3>
        <div class="card p-3">
            <div class="mb-3">
                <label for="document" class="form-label">Select file (PDF, JPG)</label>
                <input type="file" id="document" name="document" class="form-control" accept=".pdf,.jpg,.jpeg" />
            </div>
            <div class="border p-3 text-center" style="height: 100px;">
                Drag and drop files here or click to upload (PDF, JPG)
            </div>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Submit Claim</button>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // bare levl basic drag-and-drop 
        const dropZone = document.querySelector('.border');
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.backgroundColor = '#e9ecef';
        });
        dropZone.addEventListener('dragleave', () => {
            dropZone.style.backgroundColor = '';
        });
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.backgroundColor = '';
            const fileInput = document.querySelector('#document');
            fileInput.files = e.dataTransfer.files;
        });
    </script>
}